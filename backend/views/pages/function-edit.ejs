<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head', { title: 'Edit Function' }) %>
</head>
<body>
  <%- include('../partials/header', { active: 'functions', user: user }) %>

  <main class="main-content">
    <h1>Edit Function</h1>

    <form method="POST" action="/functions/<%= fn.id %>/edit" class="card">
      <label>Event Name</label>
      <input type="text" name="event_name" value="<%= fn.event_name %>" required />

      <label>Date</label>
      <input type="date" name="event_date" value="<%= fn.event_date ? fn.event_date.toISOString().slice(0,10) : '' %>" />

      <label>Time</label>
      <input type="time" name="event_time" value="<%= fn.event_time || '' %>" />

      <label>Attendees</label>
      <input type="number" name="attendees" value="<%= fn.attendees || '' %>" />

      <label>Total Price</label>
      <input type="number" step="0.01" name="totals_price" value="<%= fn.totals_price || 0 %>" />

      <label>Total Cost</label>
      <input type="number" step="0.01" name="totals_cost" value="<%= fn.totals_cost || 0 %>" />

      <label>Status</label>
      <select name="status">
        <% ['lead','qualified','confirmed','balance_due','completed'].forEach(st => { %>
          <option value="<%= st %>" <%= fn.status===st?'selected':'' %>><%= st.replace('_',' ') %></option>
        <% }) %>
      </select>

      <div style="margin-top:16px;">
        <button type="submit" class="btn">Save Changes</button>
        <a href="/functions" class="btn ghost">Cancel</a>
      </div>
    </form>
  </main>
</body>
</html>
