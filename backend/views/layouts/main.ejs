<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ✅ Unified head partial: handles title, favicon, meta -->
  <%- include('../partials/head', { 
        title: typeof title !== 'undefined' ? title : 'Porirua Club Platform'
      }) 
  %>

  <!-- 🧠 Page-specific CSS (optional, safe guards) -->
  <% if (typeof pageCss !== 'undefined' && pageCss) { %>
    <% (Array.isArray(pageCss) ? pageCss : [pageCss]).forEach(file => { %>
      <link rel="stylesheet" href="<%= file %>">
    <% }); %>
  <% } %>

  <!-- 🎨 Quill Editor styles -->
  <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">

  <!-- 🧩 Bootstrap Core Styles -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-qKpZLB4pBy1L1oVvTz5FQK6+E5cO3Bf3KxEjJvNIsT49EjYIFZl6ub7FepYhOVxM" 
        crossorigin="anonymous">

        <head>
  <%- include('../partials/head', { 
        title: typeof title !== 'undefined' ? title : 'Porirua Club Platform'
      }) 
  %>

  <!-- 🧩 Bootstrap Core Styles -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- 🎨 Compiled SCSS Styles -->
  <link rel="stylesheet" href="/css/styles.css">
</head>

</head>

<body data-page="<%= typeof pageType !== 'undefined' ? pageType : '' %>">

  <!-- 🧭 Main Header -->
  <header class="main-header">
    <div class="header-left">
      <a href="/" class="logo-link">
        <img src="/img/pc-logo.png" alt="Porirua Club" class="logo-img" />
      </a>

      <nav class="nav-links">
        <a href="/dashboard" class="<%= (typeof active !== 'undefined' && active === 'dashboard') ? 'active' : '' %>">Dashboard</a>
        <a href="/functions" class="<%= (typeof active !== 'undefined' && active === 'functions') ? 'active' : '' %>">Functions</a>
        <a href="/inbox" class="<%= (typeof active !== 'undefined' && active === 'inbox') ? 'active' : '' %>">Inbox</a>
        <a href="/settings" class="<%= (typeof active !== 'undefined' && active === 'settings') ? 'active' : '' %>">Settings</a>
      </nav>
    </div>

    <div class="header-right">
      <% if (typeof user !== 'undefined' && user) { %>
        <div class="user-circle" title="<%= user.name || '' %>">
          <%= user.name ? user.name.charAt(0).toUpperCase() : '?' %>
        </div>
      <% } else { %>
        <a href="/login" class="btn ghost small">Login</a>
      <% } %>
    </div>
  </header>

  <!-- 💠 Main Content Area -->
  <main class="main-content container py-4">
    <%- body %>
  </main>

  <!-- 📣 Toast Notifications -->
  <div id="toast-container"></div>

  <!-- ⚙️ Core Vendor Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
          crossorigin="anonymous"></script>
  <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>

  <!-- ⚙️ Core App Scripts -->
  <script type="module" src="/js/core/init.js"></script>

  <!-- 🧩 Page-specific JS (optional, safe guards) -->
  <% if (typeof pageJs !== 'undefined' && pageJs) { %>
    <% (Array.isArray(pageJs) ? pageJs : [pageJs]).forEach(file => { %>
      <script src="<%= file %>"></script>
    <% }); %>
  <% } %>

</body>
</html>




