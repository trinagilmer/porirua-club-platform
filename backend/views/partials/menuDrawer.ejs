
<!-- ðŸ§© Menu Drawer (Offcanvas Right) -->
<div
  class="offcanvas offcanvas-end"
  tabindex="-1"
  id="menuDrawer"
  aria-labelledby="menuDrawerLabel"
>
  <div class="offcanvas-header border-bottom">
    <h5 id="menuDrawerLabel" class="offcanvas-title">Add / Edit Menu</h5>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="offcanvas"
      aria-label="Close"
    ></button>
  </div>

  <div class="offcanvas-body">
    <form id="menuForm">
      <!-- ðŸ”¹ Menu Name -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Menu Name</label>
        <input
          type="text"
          name="name"
          class="form-control"
          placeholder="e.g. Buffet Dinner"
          required
        />
      </div>

      <!-- ðŸ”¹ Sales Category -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Sales Category</label>
        <select name="category_id" class="form-select" required>
          <% if (categories && categories.length) { %>
            <% categories.forEach(cat => { %>
              <option value="<%= cat.id %>"><%= cat.name %></option>
            <% }) %>
          <% } else { %>
            <option value="">No categories available</option>
          <% } %>
        </select>
      </div>

      <!-- ðŸ”¹ Price -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Base Price</label>
        <input
          type="number"
          name="price"
          class="form-control"
          step="0.01"
          min="0"
          placeholder="e.g. 35.00"
        />
      </div>

      <!-- ðŸ”¹ Description -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Description</label>
        <textarea
          name="description"
          class="form-control"
          rows="3"
          placeholder="Describe this menu..."
        ></textarea>
      </div>

      <!-- ðŸ”¹ Linked Choices -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Linked Choices</label>

        <ul id="choiceList" class="list-group small mb-2">
          <!-- JS will populate linked choices here -->
        </ul>

        <div class="d-flex gap-2">
          <button
            type="button"
            id="addChoiceBtn"
            class="btn btn-sm btn-outline-primary flex-grow-1"
          >
            + Link Existing Choice
          </button>

          <button
            type="button"
            id="createChoiceBtn"
            class="btn btn-sm btn-outline-success flex-grow-1"
          >
            + Create New Choice
          </button>
        </div>
      </div>

      <!-- ðŸ”¹ Save -->
      <div class="d-grid mt-4">
        <button type="submit" id="saveMenuBtn" class="btn btn-primary">
          ðŸ’¾ Save Menu
        </button>
      </div>
    </form>
  </div>
</div>
<!-- ðŸ§© Create Choice Modal -->
<div class="modal fade" id="createChoiceModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <form class="modal-content" id="createChoiceForm">
      <div class="modal-header">
        <h5 class="modal-title">Add Choice</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <!-- Choice Name -->
        <div class="mb-3">
          <label for="choiceName" class="form-label">Choice name</label>
          <input type="text" class="form-control" id="choiceName" required placeholder="e.g., Beef Main">
        </div>

        <!-- Default Option Name (pre-fills from Choice) -->
        <div class="mb-3">
          <label for="optionName" class="form-label">Default option name</label>
          <input type="text" class="form-control" id="optionName" placeholder="e.g., Beef Sirloin">
          <div class="form-text">If left blank, weâ€™ll use the choice name.</div>
        </div>

        <!-- Price + Unit -->
        <div class="row g-3">
          <div class="col-6">
            <label for="optionPrice" class="form-label">Price</label>
            <input type="number" step="0.01" class="form-control" id="optionPrice" placeholder="e.g., 28.00">
          </div>
          <div class="col-6">
            <label for="optionUnit" class="form-label">Unit</label>
            <select id="optionUnit" class="form-select">
              <option value="">â€” none â€”</option>
              <!-- options populated by JS -->
            </select>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">Add Choice</button>
      </div>
    </form>
  </div>
</div>
<!-- ðŸ§© Link Existing Choice Modal -->
<div class="modal fade" id="linkChoiceModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" id="linkChoiceModalContent">
      <div class="modal-header">
        <h5 class="modal-title">Link Existing Choice</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <!-- Search -->
        <div class="row g-2 align-items-center mb-3">
          <div class="col-sm-8">
            <input type="search" id="linkSearch" class="form-control" placeholder="Search choices by nameâ€¦">
          </div>
          <div class="col-sm-4 text-sm-end">
            <small class="text-muted" id="linkHint">Type to search. Results exclude choices already linked to this menu.</small>
          </div>
        </div>

        <!-- Results -->
        <div id="linkResults" class="list-group border rounded" style="max-height: 340px; overflow: auto;">
          <div class="list-group-item text-muted fst-italic">Start typing to find choicesâ€¦</div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>





